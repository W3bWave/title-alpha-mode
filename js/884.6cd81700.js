"use strict";(self["webpackChunktitl"]=self["webpackChunktitl"]||[]).push([[884],{1592:function(e,a,t){t.d(a,{c:function(){return b}});t(3248);var r=t(4108),i=t(9096),l=t.p+"img/titl.1d218dff.svg",n=t(9452),c=t(6920);const s=e=>((0,r.ED)("data-v-4fc71fca"),e=e(),(0,r.ii)(),e),o={class:"header"},d={class:"header__icon"},m={class:"navigation"},u={class:"navigation__ul"},p=(0,r.IL)('<li class="navigation__ul-item" data-v-4fc71fca><a href="/" class="navigation__ul-item-href" data-v-4fc71fca>Главная</a></li><li class="navigation__ul-item" data-v-4fc71fca><a href="#catalog" class="navigation__ul-item-href" data-v-4fc71fca>Каталог <img class="icon" src="'+n+'" alt="list" data-v-4fc71fca></a></li>',2),v={key:0,class:"navigation__ul-item"},h={class:"header__container"},_=s((()=>(0,r.QD)("form",{class:"header__container-form"},[(0,r.QD)("button",{class:"header__container-form-btn",type:"submit"}," ф "),(0,r.QD)("input",{class:"header__container-form-input",name:"find",type:"text",placeholder:"Поиск"})],-1))),f={class:"header__cart"},g=s((()=>(0,r.QD)("img",{class:"icon",src:c},null,-1))),A={key:0,class:"point"};function y(e,a,t,n,c,s){const y=(0,r.E1)("RouterLink");return(0,r.Wz)(),(0,r.An)("header",o,[(0,r.QD)("div",d,[(0,r.QD)("img",{onClick:a[0]||(a[0]=a=>e.$router.push("/")),class:"header__icon-item",src:l,alt:"titl.vue"})]),(0,r.QD)("nav",m,[(0,r.QD)("ul",u,[p,e.$store.state.user?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("li",v,[(0,r.QD)("a",{onClick:a[1]||(a[1]=a=>e.$CoreAPI.devAuth()),href:"#",class:"navigation__ul-item-href"},"Dev Auth")]))])]),(0,r.QD)("div",h,[_,(0,r.QD)("div",f,[(0,r.K2)(y,{to:"/cart"},{default:(0,r.Ql)((()=>[g,(0,r.mY)(),c.cartAmount>0?((0,r.Wz)(),(0,r.An)("div",A,(0,i.WA)(c.cartAmount),1)):(0,r.g1)("",!0)])),_:1})])])])}var D={name:"HeaderComp",data(){return{cartAmount:-1}},mounted(){let e=this;this.$CoreAPI.on("cart-updated",(()=>{e.cartAmount=e.$CoreAPI.client_getTotalAmounts()})),e.cartAmount=e.$CoreAPI.client_getTotalAmounts()}},C=t(4100);const Q=(0,C.c)(D,[["render",y],["__scopeId","data-v-4fc71fca"]]);var b=Q},6820:function(e,a,t){t.r(a),t.d(a,{default:function(){return S}});var r=t(4108),i=t(7764),l=t(9096),n=t(5012),c=t.p+"img/delivery_russia.c92d84bd.svg",s=t.p+"img/delivery_town.5f47039b.svg",o=t.p+"img/delivery_company.7c230091.svg",d=t.p+"img/delivery_self.bf97542a.svg";const m=e=>((0,r.ED)("data-v-7d5cae36"),e=e(),(0,r.ii)(),e),u={class:"order"},p=m((()=>(0,r.QD)("h1",{style:{"font-weight":"100","font-size":"1.4em","text-transform":"uppercase"}},"Оформление заказа",-1))),v=m((()=>(0,r.QD)("h2",null,"Контактные данные",-1))),h=m((()=>(0,r.QD)("input",{type:"text",placeholder:"ФИО",name:"fio"},null,-1))),_=m((()=>(0,r.QD)("input",{type:"text",placeholder:"EMAIL",name:"email"},null,-1))),f=m((()=>(0,r.QD)("input",{type:"text",placeholder:"НОМЕР ТЕЛЕФОНА",name:"phone"},null,-1))),g=m((()=>(0,r.QD)("h2",null,"Товары в корзине",-1))),A={class:"cart_table"},y={class:"cart_elem_image"},D=["src"],C={key:1,src:n,height:"100"},Q={class:"cart_elem_meta_group"},b={class:"cart_elem_name"},$={class:"cart_elem_prop"},I={class:"cart_elem_prop"},P={class:"cart_elem_meta_group"},W={class:"cart_elem_meta"},k={class:"cart_elem_price"},z=["onClick"],x=(0,r.IL)('<h2 data-v-7d5cae36>Способ доставки</h2><input type="radio" name="delivery" id="r1" value="delivery_russia" data-v-7d5cae36><label class="radio-btn" for="r1" data-v-7d5cae36><img src="'+c+'" height="52" alt="Почта россии" data-v-7d5cae36><span data-v-7d5cae36>Почта России</span></label><input type="radio" name="delivery" id="r2" value="delivery_town" data-v-7d5cae36><label class="radio-btn" for="r2" data-v-7d5cae36><img src="'+s+'" height="52" alt="Почта россии" data-v-7d5cae36><span data-v-7d5cae36>Доставка по городу</span></label><input type="radio" name="delivery" id="r3" value="delivery_company" data-v-7d5cae36><label class="radio-btn" for="r3" data-v-7d5cae36><img src="'+o+'" height="52" alt="Почта россии" data-v-7d5cae36><span data-v-7d5cae36>Транспортная компания</span></label><input type="radio" name="delivery" id="r4" value="delivery_self" data-v-7d5cae36><label class="radio-btn" for="r4" data-v-7d5cae36><img src="'+d+'" height="52" alt="Почта россии" data-v-7d5cae36><span data-v-7d5cae36>Самовывоз</span></label>',9);function w(e,a,t,n,c,s){const o=(0,r.E1)("HeaderComp");return(0,r.Wz)(),(0,r.An)("div",u,[(0,r.K2)(o),(0,r.QD)("form",{class:"form",ref:"form",onSubmit:a[1]||(a[1]=(0,i.Y7)((()=>{}),["prevent"]))},[p,v,h,_,f,g,(0,r.QD)("div",A,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(c.cart,(a=>((0,r.Wz)(),(0,r.An)("div",{class:"cart_elem",key:a.id},[(0,r.QD)("div",y,[a.images.length>0?((0,r.Wz)(),(0,r.An)("img",{key:0,src:a.images[0].path,height:"100"},null,8,D)):((0,r.Wz)(),(0,r.An)("img",C))]),(0,r.QD)("div",Q,[(0,r.QD)("span",b,(0,l.WA)(a.name),1),(0,r.QD)("span",$,"Размер: "+(0,l.WA)(e.$Helper.findSizeNameByID(a,a.size)),1),((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(JSON.parse(a.meta),(a=>((0,r.Wz)(),(0,r.An)("span",{class:"cart_elem_prop",key:a.name},(0,l.WA)(e.$Helper.translateMetaKey(a.name))+": "+(0,l.WA)(a.value),1)))),128)),(0,r.QD)("span",I,"Количество: "+(0,l.WA)(a.amount)+" шт",1)]),(0,r.QD)("div",P,[(0,r.QD)("div",W,[(0,r.QD)("span",k,[(0,r.mY)((0,l.WA)(~~a.price*~~a.amount)+" р. ",1),(0,r.QD)("button",{onClick:e=>s.removeFromOrder(a)},"Удалить из заказа",8,z)])])])])))),128))]),x,(0,r.QD)("h1",null,"Общая сумма заказа: "+(0,l.WA)(c.totalPrice)+" рублей",1),(0,r.QD)("button",{onClick:a[0]||(a[0]=e=>s.goToPay())},"Оплатить")],544)])}t(3248);var E=t(1592),H={name:"OrderView",data(){return{totalPrice:0,cart:[]}},components:{HeaderComp:E.c},mounted(){let e=this;this.cart=this.$CoreAPI.client_getCart();for(let a of this.$CoreAPI.client_getCart())console.log(a),e.totalPrice+=~~a.price*~~a.amount;this.$CoreAPI.client_getCart().length<1&&this.$router.push("/cart"),this.$CoreAPI.on("cart-updated",(()=>{this.cart=this.$CoreAPI.client_getCart()}))},methods:{goToPay(){let e=[],a=this.$refs.form;for(let r of this.$CoreAPI.client_getCart())delete r["price"],delete r["name"],e.push(r);let t={prods:JSON.stringify(e),fio:a.fio.value,phone:a.phone.value,email:a.email.value,delivery:a.delivery.value};for(let r in t)if(t[r].length<1)return alert("Проверьте заполненность всех полей");this.$CoreAPI.client_clearCart(),this.$CoreAPI.create_order(t).then((e=>{location.href=e.paylink}))},removeFromOrder(e){this.$CoreAPI.client_removeFromCart(e),this.$CoreAPI.client_getCart().length<1&&this.$router.push("/cart")}}},O=t(4100);const L=(0,O.c)(H,[["render",w],["__scopeId","data-v-7d5cae36"]]);var S=L},9452:function(e,a,t){e.exports=t.p+"img/arrow.391818fb.svg"},6920:function(e,a,t){e.exports=t.p+"img/cart.70aa1c04.svg"},5012:function(e,a,t){e.exports=t.p+"img/product_none.bc322c17.png"}}]);
//# sourceMappingURL=884.6cd81700.js.map